(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["transfer_follow"],{2144:function(t,r,a){"use strict";a.d(r,"a",(function(){return c})),a.d(r,"b",(function(){return o}));var e=a("1f75");function n(t,r){return e["a"].post(t,r).then((function(t){return new Promise((function(r,a){r(t.data)}))}))}function s(t,r){return e["a"].get(t,r).then((function(t){return new Promise((function(r,a){r(t.data)}))}))}var i={post:n,get:s},c=function(t){return i.post("/future/follow/transfer",t)},o=function(t){return i.get("/future/follow/transfer-record",t)}},ccf9:function(t,r,a){},ceba:function(t,r,a){"use strict";a.r(r);var e=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"add-address"},[a("van-nav-bar",{attrs:{title:t.$t("FundsTransfer"),"left-arrow":""},on:{"click-left":t.goBack}},[a("div",{staticClass:"right",attrs:{slot:"right"},slot:"right"},[a("router-link",{attrs:{to:"/assets/transfer_follow_his"}},[a("div",{staticClass:"nav-right"})])],1)]),a("div",{staticClass:"main"},[a("div",{staticClass:"exchange"},[a("div",{staticClass:"left"},[a("div",{staticClass:"top"},[t._m(0),a("div",{staticClass:"two"},[t._v(t._s(t.$t("From")))]),a("div",{staticClass:"three"},[a("div",{staticClass:"select"},[a("cube-select",{attrs:{title:t.$t("Accounts"),options:t.fromAccountList,placeholder:t.placeholder,"auto-pop":t.autoPop},on:{change:t.changeFrom},model:{value:t.transferParam.fromApplId,callback:function(r){t.$set(t.transferParam,"fromApplId",r)},expression:"transferParam.fromApplId"}})],1)])]),a("div",{staticClass:"bottom"},[t._m(1),a("div",{staticClass:"two"},[t._v(t._s(t.$t("To")))]),a("div",{staticClass:"three"},[a("div",{staticClass:"select"},[a("cube-select",{attrs:{title:t.$t("Accounts"),options:t.toAccountList,placeholder:t.placeholder,"auto-pop":t.autoPop},model:{value:t.transferParam.toApplId,callback:function(r){t.$set(t.transferParam,"toApplId",r)},expression:"transferParam.toApplId"}})],1)])])]),a("div",{staticClass:"right"},[a("div",{staticClass:"back",on:{click:t.exchange}})])]),a("div",{staticClass:"label"},[t._v(t._s(t.$t("Currency")))]),a("div",{staticClass:"select input"},[a("cube-select",{attrs:{title:t.title,options:t.showCurrencyList,placeholder:t.placeholder,"auto-pop":t.autoPop,disabled:t.disabled},on:{change:t.change},model:{value:t.transferParam.currencyId,callback:function(r){t.$set(t.transferParam,"currencyId",r)},expression:"transferParam.currencyId"}})],1),a("div",{staticClass:"label"},[t._v(t._s(t.$t("Quantity")))]),a("div",{staticClass:"input coin-value"},[a("van-field",{attrs:{type:"number",maxlength:"20",center:"",placeholder:t.minTransfer?t.$t("MinimumTransfer")+t.minTransfer:t.$t("InputTransferAmount")},on:{input:t.oninput},model:{value:t.transferParam.num,callback:function(r){t.$set(t.transferParam,"num",r)},expression:"transferParam.num"}},[a("div",{attrs:{slot:"button"},slot:"button"},[t._v("\n          "+t._s(t.currencySymbol)+" |\n          "),a("span",{on:{click:t.setFullNum}},[t._v(t._s(t.$t("All")))])])])],1),a("div",{staticClass:"small"},[t._v(t._s(t.$t("Available"))+t._s(t.available)+" "+t._s(t.currencySymbol))]),a("div",{staticClass:"charge-submit"},[a("van-button",{attrs:{disabled:!Number(t.transferParam.num)||Number(t.available)<Number(t.transferParam.num),type:"info",size:"large"},on:{click:t.doTransfer}},[t._v(t._s(t.$t("Transfer"))+"\n      ")])],1)])],1)},n=[function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"one"},[a("div",{staticClass:"dot"})])},function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"one"},[a("div",{staticClass:"dot"})])}],s=(a("8e6e"),a("ac6a"),a("456d"),a("4917"),a("6b54"),a("7514"),a("28a5"),a("ade3")),i=a("2f62"),c=a("ff51"),o=(a("2934"),a("79ec"),a("2144"));function u(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.push.apply(a,e)}return a}function l(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?u(Object(a),!0).forEach((function(r){Object(s["a"])(t,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))}))}return t}var f=a("9dcd"),d={data:function(){return{maxlength:100,indicator:{negative:!0,remain:!0},num:"",currencyId:7,description:"",title:this.$t("Currency"),placeholder:this.$t("SelectCurrency"),autoPop:!1,disabled:!1,transferId:"",minTransfer:0,uuid:"",fromPath:"/",newAvailList:[],tempAvailable:0,spotBalance:"",currencyList:[],isFull:!1,newAvailable:0,availList:[],transferParam:{fromApplId:2,toApplId:"",followContractId:"",type:1,currencyId:7,num:""}}},computed:l(l(l(l({},Object(i["e"])("common",["socketConnect"])),Object(i["e"])("base",["currencyConfig","contractConfig"])),Object(i["c"])("futures",["openAvailList"])),{},{fromAccountList:function(){var t=this;if(1===this.transferParam.type)return[{text:this.$t("FuturesAccount"),value:2}];var r=this.availList.filter((function(t){return 4===t.accountType})).map((function(r){return{text:t.$t("FollowAccount")+"("+t.contractConfig[r.contractId].symbol.split("/")[0]+")",value:r.contractId}}));return r},toAccountList:function(){var t=this;if(1==this.transferParam.type){var r=this.availList.filter((function(t){return 4===t.accountType})).map((function(r){return{text:t.$t("FollowAccount")+"("+t.contractConfig[r.contractId].symbol.split("/")[0]+")",value:r.contractId}}));return r}return[{text:this.$t("FuturesAccount"),value:2}]},showCurrencyList:function(){var t=[{value:7,text:"USDT"}];return t},currencySymbol:{get:function(){if(this.currencyConfig){var t=this.currencyConfig[this.transferParam.currencyId];if(t)return t.symbol}return""}},available:function(){var t=this,r="";if(1==this.transferParam.type){var a=this.availList.find((function(t){return 1===t.accountType&&7===t.currencyId}));a&&(r=new f(a.available).round(6,0).toString())}else{var e=this.availList.find((function(r){return 4===r.accountType&&r.contractId===t.transferParam.fromApplId}));e&&(r=new f(e.available).round(6,0).toString())}return r||""}}),watch:{},methods:l(l(l(l(l({},Object(i["b"])("assets",["transfer","transferCheck","newTransfer"])),Object(i["d"])("assets",["QUERYALLCURRENCY"])),Object(i["b"])("futures",["queryFuturesCommonInfo","futureQueryAvail","querySpotBalance","querySnapshot"])),Object(i["d"])("futures",["SET_FUTURES_CURRENCY"])),{},{goBack:function(){Object(c["e"])()},oninput:function(){this.transferParam.num=this.transferParam.num.match(/^\d*(\.?\d{0,6}|\D)/g)[0]||null},change:function(t,r,a){this.currencyId=this.transferParam.currencyId,this.transferParam.num=""},changeFrom:function(){this.queryAvailyAvail()},exchange:function(){if(0!==this.availList.length){var t=this.transferParam.fromApplId;this.transferParam.fromApplId=this.transferParam.toApplId,this.transferParam.toApplId=t,this.transferParam.type=1===this.transferParam.type?2:1,this.queryAvailyAvail()}},doTransfer:function(){var t=this;if(this.transferParam.num<=0)this.$toast(this.$t("GreaterThanZero"));else{var r={followContractId:"",type:this.transferParam.type,currencyId:this.transferParam.currencyId,num:this.transferParam.num};1===this.transferParam.type?r.followContractId=this.transferParam.toApplId:r.followContractId=this.transferParam.fromApplId,o["a"](r).then((function(r){200===r.code?(t.transferParam.num="",t.$toast.success({duration:1e3,message:t.$t("TransferSuccessfully")})):102180805===r.code?t.$toast({duration:2e3,message:t.$t("ResCode.102180805",{num:r.msg})}):102180806===r.code?t.$toast({duration:2e3,message:t.$t("ResCode.102180806",{num:r.msg})}):102180807===r.code?t.$toast({duration:2e3,message:t.$t("ResCode.102180807")}):t.$toast({duration:2e3,message:t.$t("TransferFailure")}),t.queryAvailyAvail()}))}},setFullNum:function(){this.transferParam.num=this.available},queryAvailyAvail:function(){var t=this;this.futureQueryAvail().then((function(r){if(0===r.code&&(t.availList=r.data,""===t.transferParam.toApplId)){var a=t.availList.find((function(t){return 4===t.accountType}));a&&(t.transferParam.toApplId=a.contractId)}}))}}),created:function(){this.queryAvailyAvail()}},m=d,p=(a("fc95"),a("2877")),v=Object(p["a"])(m,e,n,!1,null,"dc033d8c",null);r["default"]=v.exports},fc95:function(t,r,a){"use strict";a("ccf9")}}]);