(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["transfer"],{"0b47":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-address"},[a("van-nav-bar",{attrs:{title:t.$t("FundsTransfer"),"left-arrow":""},on:{"click-left":t.goBack}},[a("div",{staticClass:"right",attrs:{slot:"right"},slot:"right"},[a("router-link",{attrs:{to:"/assets/transfer_his?hostType="+t.hostType}},[a("div",{staticClass:"nav-right"})])],1)]),a("div",{staticClass:"main"},[a("div",{staticClass:"exchange"},[a("div",{staticClass:"left"},[a("div",{staticClass:"top"},[t._m(0),a("div",{staticClass:"two"},[t._v(t._s(t.$t("From")))]),a("div",{staticClass:"three"},[a("div",{staticClass:"select"},[a("cube-select",{attrs:{title:t.$t("Accounts"),options:t.appList,placeholder:t.placeholder,"auto-pop":t.autoPop,disabled:t.disabled},on:{change:t.changeFrom},model:{value:t.params.fromApplId,callback:function(e){t.$set(t.params,"fromApplId",e)},expression:"params.fromApplId"}})],1)])]),a("div",{staticClass:"bottom"},[t._m(1),a("div",{staticClass:"two"},[t._v(t._s(t.$t("To")))]),a("div",{staticClass:"three"},[a("div",{staticClass:"select"},[a("cube-select",{attrs:{title:t.$t("Accounts"),options:t.appList,placeholder:t.placeholder,"auto-pop":t.autoPop,disabled:t.disabled},on:{change:t.changeTo},model:{value:t.params.toApplId,callback:function(e){t.$set(t.params,"toApplId",e)},expression:"params.toApplId"}})],1)])])]),a("div",{staticClass:"right"},[a("div",{staticClass:"back",on:{click:t.exchange}})])]),a("div",{staticClass:"label"},[t._v(t._s(t.$t("Currency")))]),a("div",{staticClass:"select input"},[a("cube-select",{attrs:{title:t.title,options:t.showCurrencyList,placeholder:t.placeholder,"auto-pop":t.autoPop,disabled:t.disabled},on:{change:t.change},model:{value:t.params.currencyId,callback:function(e){t.$set(t.params,"currencyId",e)},expression:"params.currencyId"}})],1),a("div",{staticClass:"label"},[t._v(t._s(t.$t("Quantity")))]),a("div",{staticClass:"input coin-value"},[a("van-field",{attrs:{type:"number",maxlength:"20",center:"",placeholder:t.minTransfer?t.$t("MinimumTransfer")+t.minTransfer:t.$t("InputTransferAmount")},on:{input:t.oninput},model:{value:t.params.amount,callback:function(e){t.$set(t.params,"amount",e)},expression:"params.amount"}},[a("div",{attrs:{slot:"button"},slot:"button"},[t._v("\n          "+t._s(t.currencySymbol)+" |\n          "),a("span",{on:{click:t.setFullNum}},[t._v(t._s(t.$t("All")))])])])],1),a("div",{staticClass:"small"},[t._v(t._s(t.$t("Available"))+t._s(t.available)+" "+t._s(t.currencySymbol))]),a("div",{staticClass:"charge-submit"},[a("van-button",{attrs:{disabled:!Number(t.params.amount)||Number(t.available)<Number(t.params.amount)||Number(t.minTransfer)>Number(t.params.amount),type:"info",size:"large"},on:{click:t.doTransfer}},[t._v(t._s(t.$t("Transfer"))+"\n      ")])],1)])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"one"},[a("div",{staticClass:"dot"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"one"},[a("div",{staticClass:"dot"})])}],n=(a("8e6e"),a("456d"),a("4917"),a("6b54"),a("ac6a"),a("7514"),a("ade3")),i=a("2f62"),c=a("ff51"),o=a("2934");a("79ec");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p=a("9dcd"),d={data:function(){return{maxlength:100,indicator:{negative:!0,remain:!0},num:"",currencyId:7,description:"",title:this.$t("Currency"),placeholder:this.$t("SelectCurrency"),autoPop:!1,disabled:!1,transferId:"",params:{amount:"",currencyId:7,fromApplId:1,toApplId:2,transferType:null},minTransfer:0,uuid:"",fromPath:"/",newAvailList:[],tempAvailable:0,spotBalance:"",currencyList:[],hostType:""}},computed:l(l(l(l({},Object(i["e"])("common",["socketConnect"])),Object(i["e"])("base",["currencyConfig"])),Object(i["c"])("futures",["openAvailList"])),{},{appList:function(){var t=[{text:this.$t("FuturesAccount"),value:2},{text:this.$t("SpotAccount"),value:1}];return t},showCurrencyList:function(){var t=this;if(0===this.currencyList.length)return[];var e=[];e=this.currencyList.filter((function(e){var a=e.transferApplList;return a.find((function(e){return e===t.params.fromApplId}))&&a.find((function(e){return e===t.params.toApplId}))}));var a=[];return e.forEach((function(t){a.push({value:t.currencyId,text:t.symbol})})),a},currencySymbol:{get:function(){if(this.currencyConfig){var t=this.currencyConfig[this.params.currencyId];if(t)return t.symbol}return""},set:function(t){console.log(t,"set currencySymbol")}},available:function(){var t=this,e=this.params.fromApplId,a="";if(2===e){if(this.openAvailList&&this.openAvailList.length>0){var s=this.openAvailList.find((function(e){return e.currencyId===t.params.currencyId}));s&&(a=new p(s.newAvailable).round(6,0).toString())}}else if(1===e)return""===this.spotBalance?"":new p(this.spotBalance).round(6,0).toString();return a||""}}),watch:{"params.fromApplId":function(t){var e=this;this.querySpotBalance({currencyId:this.params.currencyId,hostType:this.hostType}).then((function(t){e.spotBalance=t.data?t.data:0}))},"params.currencyId":function(t,e){var a=this;this.hostType=t>99?"full":7!==t&&8!==t?"reverse":"",this.querySpotBalance({currencyId:t,hostType:this.hostType}).then((function(t){a.spotBalance=t.data?t.data:0}))},socketConnect:function(){this.socketConnect}},methods:l(l(l(l(l({},Object(i["b"])("assets",["transfer","transferCheck","newTransfer"])),Object(i["d"])("assets",["QUERYALLCURRENCY"])),Object(i["b"])("futures",["queryFuturesCommonInfo","querySpotBalance","querySnapshot"])),Object(i["d"])("futures",["SET_FUTURES_CURRENCY"])),{},{goBack:function(){Object(c["e"])()},getCurrency:function(){var t=this;this.queryFuturesCommonInfo().then((function(t){return Object(o["f"])()})).then((function(e){var a=e.data.result;t.currencyList=a,t.QUERYALLCURRENCY({result:a}),t.SET_FUTURES_CURRENCY(a),Object(c["d"])(t,"")}))},oninput:function(){this.params.amount=this.params.amount.match(/^\d*(\.?\d{0,6}|\D)/g)[0]||null},change:function(t,e,a){this.currencySymbol=a,this.currencyId=this.params.currencyId,this.params.amount=""},changeFrom:function(t){t===this.params.toApplId&&(this.params.toApplId=this.appList.find((function(e){return e.value!==t})).value)},changeTo:function(t){t===this.params.fromApplId&&(this.params.fromApplId=this.appList.find((function(e){return e.value!==t})).value)},exchange:function(){var t=[this.params.toApplId,this.params.fromApplId];this.params.fromApplId=t[0],this.params.toApplId=t[1]},doTransfer:function(){var t=this;if(this.uuid=Object(c["f"])(),this.params.amount<=0)this.$toast(this.$t("GreaterThanZero"));else{var e={hostType:this.hostType,currencyId:this.params.currencyId,amount:this.params.amount,transferType:1===this.params.fromApplId?"spot-to-future":"future-to-spot"};this.newTransfer({params:e,headers:{unique:this.uuid}}).then((function(e){t.uuid=Object(c["f"])(),200===e.data.code?(t.params.amount="",t.$toast.success({duration:1e3,message:t.$t("TransferSuccessfully")})):t.$toast({duration:2e3,message:t.$t("TransferFailure")}),t.querySpotBalance({currencyId:t.params.currencyId,hostType:t.hostType}).then((function(e){t.spotBalance=e.data?e.data:0}))})).catch((function(t){}))}},setFullNum:function(){this.params.amount=this.available>0?this.available:0},refreshSpotBalance:function(){var t=this;this.querySpotBalance({currencyId:this.params.currencyId,hostType:this.hostType}).then((function(e){t.spotBalance=e.data?e.data:0}))}}),created:function(){this.getCurrency(),this.refreshSpotBalance()}},h=d,f=(a("9e7f"),a("2877")),m=Object(f["a"])(h,s,r,!1,null,"681edfd9",null);e["default"]=m.exports},1270:function(t,e,a){},"9e7f":function(t,e,a){"use strict";a("1270")}}]);